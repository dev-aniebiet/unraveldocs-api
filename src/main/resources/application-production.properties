# UnravelDocs API - Production Configuration
# Sensitive values come from environment variables
# This file IS committed to git (no secrets here)

spring.application.name=UnravelDocs
spring.application.version=@project.version@

# ==================== Application ====================
app.base.url=${APP_BASE_URL:https://api.unraveldocs.xyz}
app.support.email=${APP_SUPPORT_EMAIL:support@unraveldocs.xyz}
app.unsubscribe.url=${APP_UNSUBSCRIBE_URL:https://api.unraveldocs.xyz/unsubscribe}
app.frontend.url=${APP_FRONTEND_URL:https://unraveldocs.xyz}

# ==================== Database ====================
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# JPA
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# Flyway
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.locations=classpath:db/migration

# Connection pooling
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.pool-name=HikariCP
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-timeout=30000

# ==================== Redis ====================
spring.data.redis.url=${SPRING_DATA_REDIS_URL:redis://redis:6379}
spring.data.redis.ssl.enabled=false
spring.data.redis.timeout=2000
spring.data.redis.database=0

# ==================== Kafka ====================
spring.kafka.bootstrap-servers=${SPRING_KAFKA_BOOTSTRAP_SERVERS:kafka:29092}
spring.kafka.consumer.group-id=unraveldocs-group
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.enable-auto-commit=false
spring.kafka.producer.acks=all
spring.kafka.producer.retries=3

# ==================== Elasticsearch ====================
spring.elasticsearch.uris=${SPRING_ELASTICSEARCH_URIS:http://elasticsearch:9200}
spring.elasticsearch.username=${SPRING_ELASTICSEARCH_USERNAME:}
spring.elasticsearch.password=${SPRING_ELASTICSEARCH_PASSWORD:}

# ==================== JWT ====================
app.jwt-secret=${APP_JWT_SECRET}
app.jwt-expiration-milliseconds=${APP_JWT_EXPIRATION_MILLISECONDS:3600000}
app.jwt-refresh-token-expiration-milliseconds=${APP_JWT_REFRESH_TOKEN_EXPIRATION_MILLISECONDS:2592000000}

# ==================== AWS S3 ====================
aws.s3.region=${AWS_S3_REGION:eu-central-1}
aws.access-key=${AWS_ACCESS_KEY}
aws.secret-key=${AWS_SECRET_KEY}
aws.s3.bucket=${AWS_S3_BUCKET}
aws.from-email=${AWS_FROM_EMAIL:no-reply@unraveldocs.xyz}

# ==================== Mailgun ====================
mailgun.api-key=${MAILGUN_API_KEY}
mailgun.from-email=${MAILGUN_FROM_EMAIL:no-reply@unraveldocs.xyz}
mailgun.domain=${MAILGUN_DOMAIN}
mailgun.http.webhook.signingin-key=${MAILGUN_HTTP_WEBHOOK_SIGNINGIN_KEY:}

# ==================== Cloudinary ====================
cloudinary.cloud-name=${CLOUDINARY_CLOUD_NAME}
cloudinary.api-key=${CLOUDINARY_API_KEY}
cloudinary.api-secret=${CLOUDINARY_API_SECRET}

# ==================== Twilio ====================
twilio.account-sid=${TWILIO_ACCOUNT_SID:}
twilio.auth-token=${TWILIO_AUTH_TOKEN:}
twilio.phone-number=${TWILIO_PHONE_NUMBER:}

# ==================== Stripe ====================
stripe.api-key=${STRIPE_API_KEY}
stripe.webhook-secret=${STRIPE_WEBHOOK_SECRET}
stripe.currency=${STRIPE_CURRENCY:usd}
stripe.checkout.success-url=${STRIPE_CHECKOUT_SUCCESS_URL:https://unraveldocs.xyz/payment-success}
stripe.checkout.cancel-url=${STRIPE_CHECKOUT_CANCEL_URL:https://unraveldocs.xyz/payment-cancel}

# ==================== Paystack ====================
paystack.secret.key=${PAYSTACK_SECRET_KEY}
paystack.webhook.secret=${PAYSTACK_WEBHOOK_SECRET}
paystack.base.url=${PAYSTACK_BASE_URL:https://api.paystack.co}
paystack.callback.url=${PAYSTACK_CALLBACK_URL}
paystack.currency=${PAYSTACK_CURRENCY:NGN}

# ==================== OpenAI ====================
spring.ai.openai.api-key=${SPRING_AI_OPENAI_API_KEY:}
spring.ai.openai.base-url=${SPRING_AI_OPENAI_BASE_URL:https://api.openai.com/v1}

# ==================== Mistral AI ====================
spring.ai.mistralai.api-key=${SPRING_AI_MISTRALAI_API_KEY:}
spring.ai.mistralai.base-url=${SPRING_AI_MISTRALAI_BASE_URL:https://api.mistral.ai/v1}

# ==================== Admin ====================
app.admin.email=${APP_ADMIN_EMAIL:admin@unraveldocs.xyz}
app.admin.password=${APP_ADMIN_PASSWORD}

# ==================== OCR ====================
tesseract.datapath=${TESSERACT_DATAPATH:/usr/share/tesseract-ocr/5/tessdata}
ocr.default-provider=${OCR_DEFAULT_PROVIDER:TESSERACT}
ocr.fallback-enabled=${OCR_FALLBACK_ENABLED:true}
ocr.fallback-provider=${OCR_FALLBACK_PROVIDER:TESSERACT}
ocr.enabled-providers=${OCR_ENABLED_PROVIDERS:TESSERACT}
ocr.tesseract.data-path=${tesseract.datapath}
ocr.tesseract.language=eng
ocr.tesseract.page-seg-mode=3
ocr.tesseract.ocr-engine-mode=3
ocr.google-vision.credentials-location=${OCR_GOOGLE_VISION_CREDENTIALS_LOCATION:classpath:google-credentials.json}
ocr.google-vision.enabled=${OCR_GOOGLE_VISION_ENABLED:false}

# ==================== Datadog ====================
management.datadog.metrics.export.api-key=${MANAGEMENT_DATADOG_METRICS_EXPORT_API_KEY:}
management.datadog.metrics.export.step=10s
management.datadog.metrics.export.enabled=${MANAGEMENT_DATADOG_METRICS_EXPORT_ENABLED:false}

# ==================== Receipt ====================
app.receipt.company-name=${APP_RECEIPT_COMPANY_NAME:UnravelDocs}
app.receipt.company-email=${APP_RECEIPT_COMPANY_EMAIL:support@unraveldocs.com}
app.receipt.company-address=${APP_RECEIPT_COMPANY_ADDRESS:Your Company Address}
app.receipt.receipt-prefix=${APP_RECEIPT_RECEIPT_PREFIX:RCP}

# ==================== Currency API ====================
currency.api.key=${CURRENCY_API_KEY}
currency.api.base-url=${CURRENCY_API_BASE_URL:https://v6.exchangerate-api.com/v6}
currency.api.caching-enabled=${CURRENCY_API_CACHING_ENABLED:true}
currency.api.cache-ttl-hours=${CURRENCY_API_CACHE_TTL_HOURS:24}
currency.api.use-fallback-rates=${CURRENCY_API_USE_FALLBACK_RATES:true}

# ==================== Messaging ====================
messaging.enabled=true
messaging.default-broker=KAFKA
messaging.kafka.enabled=true
messaging.kafka.topic-prefix=unraveldocs

# ==================== Actuator ====================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always
management.endpoint.health.show-components=always
management.endpoints.web.base-path=/actuator

# ==================== Swagger ====================
springdoc.api-docs.path=/docs
springdoc.swagger-ui.path=/swagger-ui

# ==================== File Upload ====================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.resolve-lazily=false

# ==================== Thymeleaf ====================
spring.thymeleaf.cache=true

# ==================== Logging (Production) ====================
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=INFO
logging.level.org.hibernate.SQL=WARN
