# ===========================================
# UnravelDocs API - Docker Profile Configuration
# ===========================================
# This profile is automatically activated when running in Docker
# All values are sourced from environment variables defined in .env
# ===========================================

spring.application.name=UnravelDocs
spring.application.version=@project.version@

# Application Settings
app.base.url=${APP_BASE_URL:http://localhost:8080}
app.support.email=${APP_SUPPORT_EMAIL:support@unraveldocs.xyz}
app.unsubscribe.url=${APP_UNSUBSCRIBE_URL:http://localhost:8080/unsubscribe}
app.frontend.url=${APP_FRONTEND_URL:http://localhost:4200}

# Database (uses Docker service names)
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://postgres:5432/unraveldocs}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:postgres}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# JPA
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# Flyway
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.locations=classpath:db/migration

# Database Connection pooling
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.pool-name=HikariCP
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.leak-detection-threshold=15000

# File upload
spring.servlet.multipart.enabled=true
spring.servlet.multipart.resolve-lazily=false

# Swagger
springdoc.api-docs.path=/docs
springdoc.swagger-ui.path=/swagger-ui

# JWT Configuration
app.jwt-secret=${APP_JWT_SECRET}
app.jwt-expiration-milliseconds=${APP_JWT_EXPIRATION_MS:3600000}
app.jwt-refresh-token-expiration-milliseconds=${APP_JWT_REFRESH_EXPIRATION_MS:2592000000}

# AWS S3
aws.s3.region=${AWS_S3_REGION:eu-central-1}
aws.access-key=${AWS_ACCESS_KEY}
aws.secret-key=${AWS_SECRET_KEY}
aws.s3.bucket=${AWS_S3_BUCKET:unraveldocs-s3}
aws.s3.cloudfront.url=${AWS_S3_CLOUDFRONT_URL:}
aws.s3.endpoint=${AWS_S3_ENDPOINT:}

# AWS SES
aws.from-email=${AWS_FROM_EMAIL:no-reply@unraveldocs.xyz}

# Mailgun Configuration
mailgun.api-key=${MAILGUN_API_KEY}
mailgun.from-email=${MAILGUN_FROM_EMAIL:no-reply@unraveldocs.xyz}
mailgun.domain=${MAILGUN_DOMAIN}
mailgun.http.webhook.signingin-key=${MAILGUN_WEBHOOK_SIGNING_KEY:}

# Cloudinary
cloudinary.cloud-name=${CLOUDINARY_CLOUD_NAME}
cloudinary.api-key=${CLOUDINARY_API_KEY}
cloudinary.api-secret=${CLOUDINARY_API_SECRET}

# Twilio
twilio.account-sid=${TWILIO_ACCOUNT_SID}
twilio.auth-token=${TWILIO_AUTH_TOKEN}
twilio.phone-number=${TWILIO_PHONE_NUMBER}

# Redis
spring.data.redis.url=${SPRING_DATA_REDIS_URL:redis://redis:6379}
spring.data.redis.ssl.enabled=false
spring.data.redis.timeout=2000
spring.data.redis.database=0

# Lettuce Connection Pooling
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0
spring.data.redis.lettuce.pool.max-wait=2000
spring.data.redis.lettuce.shutdown-timeout=1000

# Logging (reduced for Docker/production)
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=INFO

# Thymeleaf
spring.thymeleaf.cache=true

# Actuator
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when_authorized
management.endpoint.health.show-components=when_authorized
management.endpoints.web.base-path=/actuator

# RabbitMQ Configuration
spring.rabbitmq.host=${SPRING_RABBITMQ_HOST:rabbitmq}
spring.rabbitmq.port=${SPRING_RABBITMQ_PORT:5672}
spring.rabbitmq.username=${SPRING_RABBITMQ_USERNAME:guest}
spring.rabbitmq.password=${SPRING_RABBITMQ_PASSWORD:guest}

# Kafka Configuration
spring.kafka.bootstrap-servers=${SPRING_KAFKA_BOOTSTRAP_SERVERS:kafka:29092}
spring.kafka.consumer.group-id=unraveldocs-group
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.enable-auto-commit=false
spring.kafka.producer.acks=all
spring.kafka.producer.retries=3
spring.kafka.producer.batch-size=16384
spring.kafka.producer.linger-ms=5
spring.kafka.producer.buffer-memory=33554432

# Messaging Properties (Custom Configuration)
messaging.enabled=true
messaging.default-broker=KAFKA

# Kafka Consumer Configuration
messaging.kafka.enabled=true
messaging.kafka.topic-prefix=unraveldocs
messaging.kafka.default-partitions=3
messaging.kafka.default-replication-factor=1
messaging.kafka.default-retention-ms=604800000
messaging.kafka.consumer.concurrency=3
messaging.kafka.consumer.max-poll-records=500
messaging.kafka.consumer.session-timeout-ms=30000
messaging.kafka.consumer.heartbeat-interval-ms=10000

# Kafka Producer Configuration
messaging.kafka.producer.send-timeout-seconds=30
messaging.kafka.producer.transactional-enabled=false
messaging.kafka.producer.transactional-id-prefix=unraveldocs-tx-

# Kafka Retry Configuration
messaging.kafka.retry.max-attempts=3
messaging.kafka.retry.initial-interval-ms=1000
messaging.kafka.retry.multiplier=2.0
messaging.kafka.retry.max-interval-ms=30000
messaging.kafka.retry.retry-topics-enabled=true

# Payment Kafka Configuration
payment.kafka.consumer.concurrency=6
payment.kafka.consumer.max-poll-records=500
payment.kafka.consumer.fetch-max-wait-ms=500
payment.kafka.consumer.session-timeout-ms=30000
payment.kafka.consumer.heartbeat-interval-ms=10000
payment.kafka.consumer.max-poll-interval-ms=300000
payment.kafka.webhook-consumer.concurrency=4
payment.kafka.producer.batch-size=32768
payment.kafka.producer.linger-ms=10
payment.kafka.producer.compression-type=lz4

# Tesseract Configuration
tesseract.datapath=${TESSERACT_DATAPATH:/usr/share/tesseract-ocr/5/tessdata}

# OpenAI Configuration
spring.ai.openai.api-key=${SPRING_AI_OPENAI_API_KEY}
spring.ai.openai.base-url=${SPRING_AI_OPENAI_BASE_URL:https://api.openai.com/v1}

# Mistral AI Configuration
spring.ai.mistralai.api-key=${SPRING_AI_MISTRALAI_API_KEY}
spring.ai.mistralai.base-url=${SPRING_AI_MISTRALAI_BASE_URL:https://api.mistral.ai/v1}

# Stripe Configuration
stripe.api-key=${STRIPE_API_KEY}
stripe.currency=${STRIPE_CURRENCY:usd}
stripe.webhook-secret=${STRIPE_WEBHOOK_SECRET}
stripe.checkout.success-url=${STRIPE_CHECKOUT_SUCCESS_URL:http://localhost:8080/payment-success}
stripe.checkout.cancel-url=${STRIPE_CHECKOUT_CANCEL_URL:http://localhost:8080/payment-cancel}

# Paystack Configuration
paystack.secret.key=${PAYSTACK_SECRET_KEY}
paystack.base.url=${PAYSTACK_BASE_URL:https://api.paystack.co}
paystack.initialize.url=${PAYSTACK_BASE_URL:https://api.paystack.co}/transaction/initialize
paystack.verify.url=${PAYSTACK_BASE_URL:https://api.paystack.co}/transaction/verify/
paystack.webhook.secret=${PAYSTACK_WEBHOOK_SECRET:}
paystack.callback.url=${PAYSTACK_CALLBACK_URL:http://localhost:8080/api/v1/paystack/callback}
paystack.currency=${PAYSTACK_CURRENCY:NGN}

# Google Cloud Vision API
spring.cloud.gcp.credentials.location=${GOOGLE_APPLICATION_CREDENTIALS:classpath:google-credentials.json}

# Admin Credentials
app.admin.email=${APP_ADMIN_EMAIL:admin@unraveldocs.xyz}
app.admin.password=${APP_ADMIN_PASSWORD}

# Datadog Configuration
management.datadog.metrics.export.api-key=${DATADOG_API_KEY:}
management.datadog.metrics.export.step=10s
management.datadog.metrics.export.enabled=${DATADOG_METRICS_ENABLED:false}

# Receipt Configuration
app.receipt.company-name=${APP_RECEIPT_COMPANY_NAME:UnravelDocs}
app.receipt.company-email=${APP_RECEIPT_COMPANY_EMAIL:support@unraveldocs.com}
app.receipt.company-address=${APP_RECEIPT_COMPANY_ADDRESS:Your Company Address}
app.receipt.receipt-prefix=${APP_RECEIPT_PREFIX:RCP}
